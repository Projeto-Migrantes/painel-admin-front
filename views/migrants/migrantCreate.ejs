<%- include("../partials/header.ejs") %>
<body>
  <%- include("../partials/navbar.ejs") %>
  <br><br>
  <div class="container mt-5 mb-4">
    <h1 class="mt-4 mb-3 text-primary">
      <i class="bi bi-person-plus-fill"></i> Cadastrar Migrante
    </h1>

    <form action="/dashboard/migrant/create" method="POST">
      <input type="hidden" name="_method" value="POST">

      <div class="form-group">
        <label for="full_name">Nome Completo*</label>
        <input type="text" class="form-control" id="full_name" name="full_name" maxlength="150" required placeholder="Nome Completo">
      </div>

      <div class="form-group">
        <label for="social_name">Nome Social</label>
        <input type="text" class="form-control" id="social_name" name="social_name" maxlength="150" placeholder="Nome Social">
      </div>

      <div class="form-group">
        <label for="gender">Gênero*</label>
        <select class="form-control" id="gender" name="gender" required onchange="toggleOtherGenderInput()">
          <option value="" disabled selected>Selecione uma opção</option>
          <option value="Masculino">Masculino</option>
          <option value="Feminino">Feminino</option>
          <option value="Não-binário">Não-binário</option>
          <option value="Transfeminino">Transfeminino</option>
          <option value="Transmasculino">Transmasculino</option>
          <option value="Agênero">Agênero</option>
          <option value="Gênero Fluido">Gênero Fluido</option>
          <option value="Prefiro não informar">Prefiro não informar</option>
          <option value="Outro">Outro</option>
        </select>
        <input type="text" class="form-control d-none mt-2" id="other_gender" name="other_gender" maxlength="80" placeholder="Especifique o gênero">
      </div>

      <div class="form-group">
        <label for="email">Email*</label>
        <input type="email" class="form-control" id="email" name="email" maxlength="100" required placeholder="Email">
        <div id="emailFeedback"></div>
      </div>

      <div class="form-group">
        <label for="phone_number">Telefone</label>
        <input type="text" class="form-control" id="phone_number" name="phone_number" maxlength="15" oninput="formatPhone(this)" placeholder="Telefone">
      </div>

      <div class="form-group">
        <label for="crnm">CRNM</label>
        <input type="text" class="form-control" id="crnm" name="crnm" maxlength="50" placeholder="Número CRNM">
      </div>

      <div class="form-group">
        <label for="date_of_birth">Data de Nascimento*</label>
        <input type="date" class="form-control" id="date_of_birth" name="date_of_birth" required>
      </div>

      <div class="form-group">
        <label for="language_preference">Idioma Preferido*</label>
        <input type="text" class="form-control" id="language_preference" name="language_preference" maxlength="100" required placeholder="Idioma Preferido">
      </div>

      <div class="form-group">
        <label for="entry_into_brazil">Data de Entrada no Brasil*</label>
        <input type="date" class="form-control" id="entry_into_brazil" name="entry_into_brazil" required>
      </div>

      <div class="form-group">
        <label for="migration_reason">Razão de Imigração*</label>
        <input type="text" class="form-control" id="migration_reason" name="migration_reason" maxlength="240" required placeholder="Motivo da Imigração">
      </div>

      <div class="form-group">
        <label for="country_of_origin">País de Origem*</label>
        <input type="text" class="form-control" id="country_of_origin" name="country_of_origin" maxlength="120" required placeholder="País de Origem">
      </div>

      <div class="form-group">
        <label for="marital_status">Estado Civil*</label>
        <select class="form-control" id="marital_status" name="marital_status" required>
          <option value="" disabled selected>Selecione uma opção</option>
          <option value="Solteiro">Solteiro</option>
          <option value="Casado">Casado</option>
          <option value="Separado">Separado</option>
          <option value="Divorciado">Divorciado</option>
          <option value="Viúvo">Viúvo</option>
          <option value="Prefiro não informar">Prefiro não informar</option>
        </select>
      </div>

      <div class="form-group">
        <label for="literacy_level">Escolaridade*</label>
        <input type="text" class="form-control" id="literacy_level" name="literacy_level" maxlength="150" required placeholder="Ex: Ensino Médio Completo">
      </div>

      <hr>
      <h3 class="mt-4 text-primary">
        <i class="bi bi-geo-alt-fill"></i> Endereço
      </h3>

      <div class="form-group">
        <label for="postal_code">CEP*</label>
        <input type="text" class="form-control" id="postal_code" name="postal_code" maxlength="9" required oninput="formatCEP(this)" placeholder="Digite o CEP">
        <button type="button" id="btnBuscarEndereco" class="btn btn-primary mt-2">Buscar Endereço</button>
      </div>

      <div class="form-group">
        <label for="street">Logradouro*</label>
        <input type="text" class="form-control" id="street" name="street" maxlength="255" required placeholder="Rua, Avenida...">
      </div>

      <div class="form-group">
        <label for="neighborhood">Bairro*</label>
        <input type="text" class="form-control" id="neighborhood" name="neighborhood" maxlength="255" required placeholder="Bairro">
      </div>

      <div class="form-group">
        <label for="city">Cidade*</label>
        <input type="text" class="form-control" id="city" name="city" maxlength="150" required placeholder="Cidade">
      </div>

      <div class="form-group">
        <label for="state">Estado*</label>
        <input type="text" class="form-control" id="state" name="state" maxlength="150" required placeholder="Estado">
      </div>

      <div class="form-group">
        <label for="address_number">Número*</label>
        <input type="text" class="form-control" id="address_number" name="address_number" maxlength="10" required placeholder="Número">
      </div>

      <div class="form-group">
        <label for="address_complement">Complemento</label>
        <input type="text" class="form-control" id="address_complement" name="address_complement" maxlength="240" placeholder="Complemento (opcional)">
      </div>

      <div class="alert alert-warning" role="alert">
        <i class="bi bi-exclamation-circle"></i>
        Caso a busca pelo endereço não retorne resultados, preencha os campos acima manualmente.
      </div>

      <hr>
      <h3 class="mt-5 mb-3 text-primary">
        <i class="bi bi-lock-fill"></i> Senha do Migrante
      </h3>
      <p>Esta senha será usada junto ao e-mail para acessar o aplicativo <strong>Rede Sem Fronteiras</strong>.</p>

      <div class="form-group">
        <label for="password">Senha*</label>
        <div class="input-group">
          <input type="password" class="form-control" id="password" name="password" maxlength="20" required placeholder="Senha">
          <button class="btn btn-outline-secondary" type="button" id="togglePassword">
            <i class="bi bi-eye-slash" id="eyeIcon"></i>
          </button>
        </div>
      </div>

      <div class="form-group">
        <label for="confirm_password">Confirme a Senha*</label>
        <div class="input-group">
          <input type="password" class="form-control" id="confirm_password" name="confirm_password" maxlength="20" required placeholder="Confirme a Senha">
          <button class="btn btn-outline-secondary" type="button" id="toggleConfirmPassword">
            <i class="bi bi-eye-slash" id="eyeIconConfirm"></i>
          </button>
        </div>
      </div>

      <div class="form-check mb-3">
        <input type="checkbox" class="form-check-input" id="terms" name="authorized" required>
        <label class="form-check-label" for="terms">
          O migrante aceita os <a href="/terms/migrante" target="_blank">Termos e Condições</a>
        </label>
      </div>

      <button type="submit" class="btn btn-success">
        <i class="bi bi-person"></i> Cadastrar Migrante
      </button>
      <a href="/dashboard/migrants" class="btn btn-secondary">
        <i class="bi bi-x-lg"></i> Cancelar
      </a>
    </form>
  </div>

  <script src="/js/scriptMigrantCreate.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <%- include("../partials/footer.ejs") %>
</body>
</html>
